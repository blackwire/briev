'use strict';

const { ipcMain, Tray, nativeImage } = require('electron');
let trae;

exports.init = function(minu, wino)
{
    // initialize the tray with the tray menu utilizing the minu object provided
    trae = new Tray(__dirname + '/tray-icon.png');
    trae.setContextMenu(minu.tray(wino));

    // handle tray behavior of switching icons and which clipboard shows as checked
    ipcMain.on('switch-clipboard-1', function()
    {
        let menu = minu.tray(wino);
        menu.items[3].checked = false;
        menu.items[2].checked = true;
        trae.setContextMenu(menu);
        trae.setImage(__dirname + '/tray-icon-1.png');
    });

    ipcMain.on('switch-clipboard-2', function()
    {
        let menu = minu.tray(wino);
        menu.items[2].checked = false;
        menu.items[3].checked = true;
        trae.setContextMenu(menu);
        trae.setImage(__dirname + '/tray-icon-2.png');
    });
}

exports.destroy = function()
{ trae.destroy(); }